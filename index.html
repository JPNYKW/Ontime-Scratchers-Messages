<html>

	<head>
		<title>Show Scratcher Messages</title>
	<script>

		var display,mov,first,old;
		var str='Setting...';
		var plus=new Audio();
		var minus=new Audio()
		plus.src='plus.mp3';
		minus.src='minus.mp3'
		var flag=false;
		
		function init(){
			display=document.getElementById('display');
			mov=document.getElementById('mov');
		}

		
		function start(){
			user=document.getElementById('txt').value;
			mov.innerText='';
			str='Getting...';
			old=null;
			flag=true;
		}

		setInterval(function(){

			if(flag){
				set=user=>`https://api.scratch.mit.edu/users/${user}/messages/count`;

				rq=new XMLHttpRequest();
				rq.open('GET',set(user),false);rq.send(null);

				if(rq.readyState==4&&rq.status==200){

					r='';
					(rq.responseText).match(/[0-9]/g).forEach(function(e){r+=e});

					console.log(`${user}\'s messages:${r}`);
					if(old!=r){if(old!=null){old<r?plus.play():minus.play();}old=r;}
					display.innerText=`${user}\'s messages:${r}`;

				}
			
}
			mov.innerText=str.substr(0,mov.innerText.length%(str.length)+1);
		},500);
	</script>

	<style>
		body{
			color:#fafafa;
			background: linear-gradient(-90deg, #FFC342, #FFCD41, #FFEF41);
		}
		
		a:link{color: #3FFAFF;}
		a:visited{color:#3188C6;}
		a:hover{color:#FFF054;}
		a:active{color:#FF8223;}
	</style>

	</head>
	
	<body onload="init()">
		<center>
			<h1>Ontime Scratchers Messages - OSM v2.3.7</h1>
			UserName:<input type="text" id="txt" value="">
			<input type="button" value="done" onclick="start();">

			<h1 id='display'>NONAME's messages:0</h1>
			<h1 id="mov"></h1><br><br>
			
			<img src="code040fixfix.png" onclick="window.open('https://scratch.mit.edu/users/youkaiwatch')"></img><br>
			&spades; It works by <a href="https://scratch.mit.edu/users/youkaiwatch" target="_blank">YKW</a>
		</center>
	</body>


</html>
