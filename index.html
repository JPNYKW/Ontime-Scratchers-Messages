<html>

	<head>
		<title>Show Scratcher Messages</title>
	<script>

		var display,mov;
		var flag=false;
		var str='Setting...';
		
		function init(){
			display=document.getElementById('display');
			mov=document.getElementById('mov');
		}

		
		function start(){

			user=document.getElementById('txt').value;

			mov.innerText='';
			str='Getting...';
			flag=true;
		}

		setInterval(function(){

			if(flag){
				set=user=>`https://api.scratch.mit.edu/users/${user}/messages/count`;

				rq=new XMLHttpRequest();
				rq.open('GET',set(user),false);rq.send(null);

				if(rq.readyState==4&&rq.status==200){

					r='';
					(rq.responseText).match(/[0-9]/g).forEach(function(e){r+=e});

					console.log(`${user}\'s messages:${r}`);
					display.innerText=`${user}\'s messages:${r}`;

				}
			
}
			mov.innerText=str.substr(0,mov.innerText.length%(str.length)+1);
		},500);
	</script>

	<style>
		body{
			color:#fafafa;
			background: linear-gradient(-90deg, #FFC342, #FFCD41, #FFEF41);
		}
	</style>

	</head>
	
	<body onload="init()">
		<center>
			<h1>Show Scratcher Messages - SSM v1.0</h1>
			UserName:<input type="text" id="txt" value="">
			<input type="button" value="done" onclick="start();">

			<h1 id='display'>NONAME's messages:0</h1>
<h1 id="mov"></h1>
		</center>
	</body>


</html>
